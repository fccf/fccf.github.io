<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[爱的艺术读后感.md]]></title>
    <url>%2F2017%2F11%2F05%2F%E7%88%B1%E7%9A%84%E8%89%BA%E6%9C%AF%E8%AF%BB%E5%90%8E%E6%84%9F-md%2F</url>
    <content type="text"><![CDATA[最近看了《爱的艺术》,有以下几点学习和感悟: 爱是一门艺术, 这门艺术是可以学习的, 就像学画画, 重要的是一种感觉, 这种感觉需要一种创造性的倾向, 需要一种欣赏的眼光, 重要的是需要不断练习. 爱的能力就像画画一样，如果一个人想画画，但是他不去学习绘画的技艺，而是不断强调要找到他愿意画的合适的对象，以为找到那个对象，他就能画出一幅完美的画。但这根本就是幻想，即使他找到了对象，也绝对画不出来。爱是一种能力问题而不是对象问题。 许多人认为爱情只是偶然产生的的令人心荡神怡的感受主要有以下几个原因, 大多数人认为爱情首先是自己能否被人爱，而不是自己有没有能力爱的问题，于是通过粉饰自己来赢得人心, 每个人都通过显示自己多漂亮, 多有钱, 多有权等来吸引别人。 人们认为爱的问题是一个对象问题，而不是能力问题，于是苦苦等待那个人。 不了解激情和爱情的区别. 人是孤独的，一个人如果不能以某种方式同他人或周围世界结合在一起，他就会疯狂。人类摆脱孤独使同他人或周围世界结合在一起有以下集中方式, 不同形式的纵欲，吸毒，酗酒，性 …在短暂的极度兴奋中，世界消失了，与世隔绝的感觉也随之而去。 通过与一组人的习惯、风格、看法保持一致来达到与他人的结合。亲人，团体，国家 …参与者为了使自己属于这一组人而失去了大部分个性， 创造性的劳动，人在创造的过程中与世界一致。这种统一不是人与人之间的统一 只有爱才能实现人与人之间的统一 在一个商业化占统治地位以及把物质成功看得高于一切的文化中，人与人之间的爱情关系也遵循同控制商品和劳动力市场一样的基本原则。爱情的产生往往是以衡量对方及本人的交换价值为前提。 在市场经济下,有用的物和有用的人的精力和技巧都变成价值,这些价值根据市场的条件自愿公平地进行交换.在这种情况下,人们以为所有有价值的东西都是商品,一切东西都可以用钱买到,甚至爱情也是以衡量双方的交换价值为基础。 我们当前的文化以购买欲和互利互换的观念为基础，当前的社会要求人尽可能多的生产和消费, 现代人的幸福就是欣赏橱窗，用现金或分期付款的方式购买他力所能及的东西。 获得爱的能力的主要条件是克服自恋. 自恋倾向会扭曲现实, 让人自欺欺人。爱是一项积极的活动,需要创造性的发挥自己的力量。需要把内心有生命力的东西分享给他人，同别人分享他的欢乐、兴趣、理解力、知识、幽默和悲伤，需要在丰富他人的生命感的同时丰富自己的生命感。]]></content>
      <categories>
        <category>哲学</category>
      </categories>
      <tags>
        <tag>弗洛姆</tag>
        <tag>爱的艺术</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[中子输运方程一维求解程序]]></title>
    <url>%2F2017%2F11%2F02%2F%E4%B8%80%E9%98%B6%E4%B8%AD%E5%AD%90%E8%BE%93%E8%BF%90%E6%96%B9%E7%A8%8B%E4%B8%80%E7%BB%B4%E6%B1%82%E8%A7%A3%E7%A8%8B%E5%BA%8F%2F</url>
    <content type="text"><![CDATA[开发该程序主要用于测试各种算法，算法的稳定性，算法的效率，以及学习并行算法的实施。目前程序角度上采用球谐函数方法，空间上采用有限元方法。 单能一维中子输运方程$$μ\frac{∂\phi(z.μ)}{∂z}+ σ_t(z)ϕ(z,μ) = \frac{1}{2\pi}\int_{0}^{2\pi}\int_{-1}^{1}σ_s(z,\mu_0)\phi(z,\mu^{‘}))d\mu^{‘}d\varphi^{‘} + \frac{s(z)}{2}$$ 边界条件该方程是一阶双曲方程，需要给定如流边界条件，即$$\phi(z,\mu) = g,n\cdot \mu &lt;0$$所以，真空边界条件为$$\phi(z,\mu) = 0,n\cdot \mu &lt;0$$反射边界条件为$$\phi(z,\mu) = \phi(z,-\mu),n\cdot \mu &lt;0$$ Pn方法用勒让得多项式展开角度变量将中子角通量密度和散射截面都用勒让得多项式展开，得 $$\phi(z.μ) = \sum_{n=0}^{∞}\frac{2n+1}{2}\phi_n(z)P_n(\mu)$$ $$σ_s(z,\mu_0) = \sum_{n=0}^{∞}\frac{2n+1}{2}\sigma_{sn}(z)P_n(\mu_0)$$ 由勒让得多项式加法定理及正交关系得散射源项为$$\frac{1}{2\pi}\int_{0}^{2\pi}\int_{-1}^{1}σ_s(z,\mu_0)\phi(z,\mu^{‘}))d\mu^{‘}d\varphi^{‘} = \sum_{n=0}^{∞}\frac{2n+1}{2}\sigma_{sn}(z)\phi_n(z)P_n(\mu)$$ 由勒让得多项式递推公式得 $$\sum_{n=0}^{∞}\frac{d\phi_n(z)}{dz}[(n+1)P_{n+1}(\mu)+n P_{n-1}(μ)]+ \sum_{n=0}^{∞}(2n+1)σ_t(z)\phi_n(z)P_n(\mu) = \sum_{n=0}^{∞}(2n+1)\sigma_{sn}(z)\phi_n(z)P_n(\mu) + s(z)$$ 在方程两端同时乘以$P_{n}(\mu),n=0,1,2,…$,并对 $-1\le \mu \le 1$积分，得 $$\frac{n+1}{2n+1}\frac{d\phi_{n+1}(z)}{dz}+\frac{1}{2n+1}\frac{d\phi_{n-1}(z)}{dz}+\sigma_{n}\phi_n(z) = s(z)δ_{0n}$$ 式中 $σ_n = σ_t - σ_{sn}$ 在实际计算中，只取方程组前 $N+1$个方程，即认为$\frac{d\phi_{n+1}}{dz} = 0$以及$\phi_{n} = 0,n&gt;N$，此时$$\phi(z.μ) = \sum_{n=0}^{N}\frac{2n+1}{2}\phi_n(z)P_n(\mu)$$ 将其写为矩阵形式为 $$\mathbf{A}\frac{d\vec{\phi}(z)}{dz}+\mathbf{\Sigma}\vec{\phi}(z) = \vec{s}$$ 其中$$\vec{\phi} = [\phi_0,\phi_1,\phi_2,…,\phi_N]^{T}$$$$\vec{s} = [s_0,s_1,s_2,…,s_N]^{T}$$$$\mathbf{\Sigma} = diag[\sigma_n]$$$$\mathbf{A} = \begin{bmatrix} 0 &amp; 1 &amp; 0 &amp;0 &amp;… \ \frac{1}{3}&amp;0 &amp;\frac{2}{3} &amp; 0 &amp; … \ 0&amp;\frac{2}{5} &amp;0&amp; \frac{3}{5} &amp; … \ …&amp;… &amp;…&amp;… &amp; …\end{bmatrix} $$ 此时矩阵 $\mathbf{A}$ 不对称 用正交归一勒让得多项式展开$$\phi(z.μ) = \sum_{n=0}^{∞}\phi_n^{‘}(z)P_n^{‘}(\mu)$$$$σ_s(z,\mu_0) = \sum_{n=0}^{∞}\sigma_{sn}^{‘}(z)P_n^{‘}(\mu_0)$$其中$$P_n^{‘}(\mu) = \sqrt{\frac{2n+1}{2}}P_n(\mu)$$$$\int_{-1}^{1}P_n^{‘}(\mu)P_m^{‘}(\mu)d\mu = δ_{nm}$$ 递推公式$$\mu P_n^{‘}(\mu) = \frac{n+1}{\sqrt{(2n+1)(2n+3)}}{P_{n+1}^{‘}(\mu)}+\frac{n}{\sqrt{(2n-1)(2n+1)}}{P_{n-1}^{‘}(\mu)}$$ 将其带入输运方程，并利用勒让得多项式递推公式和加法定理得$$\sum_{n=0}^{∞}\frac{d\phi_n^{‘}(z)}{dz}[\frac{n+1}{\sqrt{(2n+1)(2n+3)}}{P_{n+1}^{‘}(\mu)}+\frac{n}{\sqrt{(2n-1)(2n+1)}}{P_{n-1}^{‘}(\mu)}]+ \sum_{n=0}^{∞}σ_t(z)\phi_n^{‘}(z)P_n^{‘}(\mu) = \sum_{n=0}^{∞}\sigma_{sn}^{‘}(z)\phi_n^{‘}(z)P_n^{‘}(\mu) +\frac{s(z)}{2}$$ 在方程两端同时乘以$P_{n}^{‘}(\mu),n=0,1,2,…$,并对 $-1\le \mu \le 1$积分，得$$\mathbf{A}\frac{d\vec{\phi}(z)}{dz}+\mathbf{\Sigma}\vec{\phi}(z) = \vec{s}$$ 其中$$\vec{\phi} = [\phi_0,\phi_1,\phi_2,…,\phi_N]^{T}= \sqrt{2}[\phi_0^{‘},\phi_1^{‘},\phi_2^{‘},…,\phi_N^{‘}]^{T}$$$$\vec{s} = [s_0,s_1,s_2,…,s_N]^{T}$$$$\mathbf{\Sigma} = diag[\sigma_n]$$$$\mathbf{A} = \begin{bmatrix} 0 &amp; \frac{1}{\sqrt{3}} &amp; 0 &amp;0 &amp;… \ \frac{1}{\sqrt{3}}&amp;0 &amp;\frac{2}{\sqrt{15}} &amp; 0 &amp; … \ 0&amp;\frac{2}{\sqrt{15}} &amp;0&amp; \frac{3}{\sqrt{35}} &amp; … \ 0&amp;0&amp;\frac{3}{\sqrt{35}}&amp;0 &amp; … \ …&amp;…&amp;…&amp;… &amp; …\end{bmatrix} $$ 此时矩阵 $\mathbf{A}$ 是对称的，其中$$a_{i+1,i} = a_{i,i+1} = \frac{i}{\sqrt{4i^2-1}}$$其中0阶矩$\phi_0 = \sqrt{2}\phi_{0}^{‘} = \int_{-1}^{1}\phi(z,\mu)d\mu$ 表示标通量。外中子源是各向同性的，所以 $s_1,s_2,…,s_N$都为0。 有限元方法对以下一阶方程组使用有限元方法$$\mathbf{A}\frac{d\vec{\phi}(z)}{dz}+\mathbf{\Sigma}\vec{\phi}(z) = \vec{s}$$ 将$\vec{\phi}(z)$中的每一个通量矩 $\phi_{j}(z)$用有限元基函数展开得$$\phi_{j}(z) = \sum_{i=1}^I\phi_{ji}N_{i}(z) = \vec{\phi}_{j}^{T}\vec{N}(z)$$ 将离散的未知量写成如下矩阵形式$$\mathbf{P} = \begin{bmatrix}\phi_{11}&amp; \phi_{12} &amp; … &amp; \phi_{1I}\\\phi_{21}&amp; \phi_{22} &amp; … &amp; \phi_{2I}\\⋮&amp;⋮ &amp; ⋱ &amp; ⋮\\\phi_{J1}&amp; \phi_{J2} &amp; … &amp; \phi_{JI}\end{bmatrix}$$ 所以$$\vec{\phi}(z) = \mathbf{P}\vec{N}(z)$$ 所以$$\mathbf{A}\mathbf{P}\frac{d\vec{N}(z)}{dz}+\mathbf{\Sigma}\mathbf{P}\vec{N}(z) = \vec{s}$$ galerkin方法在方程两端同时右乘以基函数$[\vec{N}]^{T}(z)$，并对单元区域进行积分，得$$\mathbf{A}\mathbf{P}_e\int_{e}\frac{\partial \vec{N}(z)}{\partial z}\vec{N}^{T}(z)dz + \int_{e}\mathbf{Σ}_e\mathbf{P}_e\vec{N}(z)\vec{N}^{T}(z)dz = \int_{e}\vec{s}_e\vec{N}^{T}(z)dz$$ 利用分部积分，得$$n\cdot \mathbf{A}\mathbf{P}_{\Gamma_n}-\mathbf{A}\mathbf{P}_e\int_{e}\vec{N}(z)\frac{\partial \vec{N}^{T}(z)}{\partial z}dz + \int_{e}\mathbf{Σ}_e\mathbf{P}_e\vec{N}(z)\vec{N}^{T}(z)dz = \int_{e}\vec{s}_e\vec{N}^{T}(z)dz$$ 边界条件令$\mathbf{A}_n = n\cdot \mathbf{A}$，将其进行特征值分解得$\mathbf{A}_n = \mathbf{A}_n^{+}+\mathbf{A}_n^{-}$ 真空边界$$\mathbf{A}_n^{-} \vec{\phi}_{\Gamma_{v}} = 0$$ 反射边界$$\mathbf{A}_n^{-} \vec{\phi}_{\Gamma_{r}} = \mathbf{A}_n^{-} \mathbf{R}\vec{\phi}_{\Gamma_{r}}$$其中矩阵 $\mathbf{R} = \int_{-1}^{1} \vec{P}_n(\mu)\vec{P}_n(-\mu)d\mu$，该矩阵是一个对角矩阵$$\mathbf{R} = diag[-1,1,-1,1,…,(-1)^{n+1}]$$ 向量化将以上矩阵方程变为向量方程为 $$-\mathbf{B}_{1z}^{T}⊗\mathbf{A}\vec{\phi} + \mathbf{B}_{11}⊗\mathbf{Σ}\vec{\phi}+\mathbf{A}_n^{+}\vec{\phi}_{Γ}+\mathbf{A}_n^{-} \mathbf{R}\vec{\phi}_{\Gamma_{r}} = \vec{b} ⊗\vec{s}$$ 其中$$\mathbf{B}_{1z} = \int_{e}\vec{N}(z)\frac{\partial \vec{N}^{T}(z)}{\partial z}dz$$$$\mathbf{B}_{11} = \int_{e}\vec{N}(z)\vec{N}(z)^{T}dz$$$$\vec{b} = \int_{e}\vec{N}(z)dz$$ 一维线性单元形状函数及其导数$$\vec{N}(z) = [λ_1,λ_2]^{T}$$$$\frac{\partial \vec{N}(z)}{\partial z} = \frac{[b_1,b_2]^{T}}{l}$$ 其中$$b_1 = -1,b_2 = 1$$ 由欧拉公式 $$\int_{z}λ_1^aλ_2^bdz=\frac{a!b!}{(a+b+1)!}l$$ 得$$\int_{z}dz=l$$$$\int_{z}λ_idz=\frac{l}{2}$$$$\int_{z}λ_i^{2}dz=\frac{l}{3}$$$$\int_{z}λ_iλ_jdz=\frac{l}{6}$$ 所以$$\mathbf{B}_{1z} = \int_{e}\vec{N}(z)\frac{\partial \vec{N}^{T}(z)}{\partial z}dz = \frac{1}{2}\begin{bmatrix}-1&amp;1\\-1&amp;1\end{bmatrix}$$ $$\mathbf{B}_{11} = \int_{e}\vec{N}(z)\vec{N}(z)^{T}dz = \frac{l}{6}\begin{bmatrix}2&amp;1\\1&amp;2\end{bmatrix}$$ $$\vec{b} = \int_{e}\vec{N}(z)dz = \frac{l}{2}\begin{bmatrix}1\\1\end{bmatrix}$$ 方程组装单元矩阵内部$$\mathbf{K}_e = -\mathbf{B}_{1z}^{T}⊗\mathbf{A} + \mathbf{B}_{11}⊗\mathbf{Σ}$$ 边界$$\mathbf{K}_{be} = \mathbf{A}_n^{+}+\mathbf{A}_n^{-} \mathbf{R}$$ RHS$$\vec{f}_e = \vec{b} ⊗\vec{s}$$ 附录勒让得多项式定义式$$P_n(\mu) = \frac{1}{2^{n}n!}\frac{d^{n}(\mu^2-1)^{n}}{d\mu^{n}}$$ 正交关系式$$\int_{-1}^{1}P_n(\mu)P_m(\mu)d\mu = \frac{2}{2n+1}δ_{nm}$$ 递推关系式$$\mu P_n(\mu) = \frac{1}{2n+1}[nP_{n-1}(\mu) + (n+1)P_{n+1}(\mu)]$$ 加法定理$$P_n(\mu_0) = P_n(\mu)P_n(\mu^{‘}) + 2\sum_{m=1}^{n}\frac{(n-m)!}{(n+m)!}P_{n}^{m}(\mu)cos(m(φ-\varphi^{‘}))$$ 多项式系数 1 $x$ $x^2$ $x^3$ $x^4$ $x^5$ $x^6$ $x^7$ 1 1 2 0 1 3 $-\frac{1}{2}$ $\frac{3}{2}$ 4 $-\frac{3}{2}$ $\frac{5}{2}$ 5 $\frac{3}{8}$ $-\frac{30}{8}$ $\frac{35}{8}$ 6 $\frac{15}{8}$ $-\frac{70}{8}$ $\frac{63}{8}$ 7 $-\frac{5}{16}$ $\frac{105}{16}$ $-\frac{315}{16}$ $\frac{231}{16}$ 8 $-\frac{35}{16}$ $\frac{315}{16}$ $-\frac{693}{16}$ $\frac{429}{16}$ 图像 向量化向量化算子定义向量化算子，按列重排$V_c$，按行重排 $V_r$$V_c(\mathbf{P}) = \begin{bmatrix}\phi_{11}\ \phi_{21}\\⋮\ \phi_{J1}\ \phi_{12} \ ⋮\\\phi_{J2} \ ⋮\\\phi_{1I} \ ⋮\\\phi_{JI}\end{bmatrix}$ $V_r(\mathbf{P}) = \begin{bmatrix}\phi_{11}\ \phi_{12}\\⋮\ \phi_{1I}\ \phi_{21} \ ⋮\\\phi_{2I} \ ⋮\\\phi_{J1} \ ⋮\ \phi_{JI}\end{bmatrix}$ 矩阵方程向量化$\mathbf{A}\mathbf{X}\mathbf{B} = \mathbf{Y} \Leftrightarrow (\mathbf{A} ⊗ \mathbf{B}^{T})V_r(\mathbf{X}) = V_r(\mathbf{Y})\Leftrightarrow (\mathbf{B}^{T}⊗\mathbf{A} )V_c(\mathbf{X}) = V_c(\mathbf{Y})$]]></content>
      <categories>
        <category>中子输运方程</category>
      </categories>
      <tags>
        <tag>中子输运方程</tag>
        <tag>Pn方法</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[勒让得多项式]]></title>
    <url>%2F2017%2F10%2F31%2F%E5%8B%92%E8%AE%A9%E5%BE%97%E5%A4%9A%E9%A1%B9%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[勒让得多项式是一组正交的多项式，主要有以下性质 勒让得多项式定义式$P_n(\mu) = \frac{1}{2^{n}n!}\frac{d^{n}(\mu^2-1)^{n}}{d\mu^{n}}$ 正交关系式$\int_{-1}^{1}P_n(\mu)P_m(\mu)d\mu = \frac{2}{2n+1}δ_{nm}$ 递推关系式$\mu P_n(\mu) = \frac{1}{2n+1}[nP_{n-1}(\mu) + (n+1)P_{n+1}(\mu)]$ 加法定理$P_n(\mu_0) = P_n(\mu)P_n(\mu^{‘}) + 2\sum_{m=1}^{n}\frac{(n-m)!}{(n+m)!}P_{n}^{m}(\mu)cos(m(φ-\varphi^{‘}))$ 多项式系数 1 $x$ $x^2$ $x^3$ $x^4$ $x^5$ $x^6$ $x^7$ 1 1 2 0 1 3 $-\frac{1}{2}$ $\frac{3}{2}$ 4 $-\frac{3}{2}$ $\frac{5}{2}$ 5 $\frac{3}{8}$ $-\frac{30}{8}$ $\frac{35}{8}$ 6 $\frac{15}{8}$ $-\frac{70}{8}$ $\frac{63}{8}$ 7 $-\frac{5}{16}$ $\frac{105}{16}$ $-\frac{315}{16}$ $\frac{231}{16}$ 8 $-\frac{35}{16}$ $\frac{315}{16}$ $-\frac{693}{16}$ $\frac{429}{16}$ 图像]]></content>
      <categories>
        <category>数值计算</category>
      </categories>
      <tags>
        <tag>pn方法</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[psblas学习]]></title>
    <url>%2F2017%2F10%2F26%2Fpsblas%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[PSBLAS(parallel sparse BLAS) 主要用于并行迭代求解大型稀疏线性代数方程组。 该程序用Fortran2003按照面向对象思想编写。 安装下载1git clone https://github.com/sfilippone/psblas3.git 安装按照说明进行安装，基本上就是以下命令1234./configuremakemake installmake clean 要预先安装blas，lapack，metis等库。 测试使用FoBis编译测试文件，定义变量 $PSB_DIR，然后修改以下的变量就可以使用psblas的所有库了。1234567$PSB_DIR = xxxmpi = Trueinclude = $PSB_DIR/modules $PSB_DIR/includelibs = -L$PSB_DIR/libext_libs = blas lapack metis psb_util psb_krylov psb_prec psb_base 概念点的分类 内部点(inner points)只依赖于同一区域的点； 边界点(boundary points)依赖于其它区域的点； 光晕点(halo points)(ghost points)一个区域的光晕点是该区域的边界点所依赖的其他区域的点；一个区域的边界点通常是其它区域的光晕点。 对于一个区域形成的矩阵，行数为 $I+B$ 行，列数为 $I+B+H$ 列，其中 $I$ 为内部点数目， $B$为边界点数目，$H$ 为光晕点数目。 索引空间(index_space)建立索引空间是计算的第一步，将索引分配到不同的进程，建立全局与局部的对应关系。 全局索引(global indices) 全局行 全局列 局部索引(local indices) 局部行 局部光晕点 -&gt; 局部列 局部全局对照表 不同的离散方法有不同的索引空间，要确定索引空间必须确定网格的稀疏模式。 内置的稀疏矩阵存储格式123- coo 坐标存储(ia(nnz),ja(nnz),a(nnz))- csr 压缩行存储(ia(nr+1),ja(nnz),a(nnz))- csc 压缩列存储 矩阵的状态123- build 分配空间之后，组装之前- assembled 组装后，之后可以进行矩阵计算。- update 对相同稀疏模式矩阵值进行更新 命名原则 所有的subroutine 和data types 以psb_ 开头 所有自定义的类以 _type 结尾 自定义的数据精度 s 单精度实数 d 双精度实数 c 单精度复数 z 双精度复数 所有常数用 _ 结尾 所有用户API 命名方式为 psb_xxname xx主要有 ge: 密集数据 sp: 稀疏数据 cd: 数据交换描述符 name主要有 init -&gt; initialize all -&gt; allocate ins -&gt; insert asb -&gt; assemble prec -&gt; precondition bld -&gt; build 主要API空间分配API 通信描述符分配psb_cdall 123456789101112131415call psb_cdall(ictxt,desc_a,info,mg=mg,parts=parts)call psb_cdall(ictxt,desc_a,info,vg=vg,[mg=mg,flag=flag])call psb_cdall(ictxt,desc_a,info,vl=vl,[nl=nl,globalcheck=.true.,lidx=lidx])call psb_cdall(ictxt,desc_a,info,nl=nl)call psb_cdall(ictxt,desc_a,info,mg=mg,repl=.true.)integer(psb_ipk_) :: ictxt ! communication contexttype(psb_desc_type) :: desc_a ! communication descriptorinteger(psb_ipk_) :: info ! Error codeinteger(psb_ipk_) :: mg ! the (global) number of rows of the problemexternal :: parts ! the partitioning subroutineinteger(psb_ipk_) :: vg(mg) ! each index(i) is allocated to process vg(i)integer(psb_ipk_) :: nl ! number of local indicesinteger(psb_ipk_) :: vl(nl) ! global indices of current processlogical :: repl ! build a replicated index space cd (communication descriptor)存储进程之间的通信信息。通信描述符分配将离散的点分配到不同的核，第一次调用后进入build state，此时可以在不同的进程中添加通信。通过psb_cdins或psb_spins添加边，即定义整个离散的模式或稀疏矩阵的稀疏模式。然后通过psb_cdasb或psb_spasb计算通信信息，即定义halo points等，进入assembled state。此时就可以进行并行的矩阵计算，内部通信会自动进行。 稀疏矩阵分配psb_spall 12345call psb_spall(a, desc_a, info, nnz)type(psb_dspmat_type) :: a ! sparse matrixtype(psb_desc_type) :: desc_a ! communication descriptorinteger(psb_ipk_) :: info ! Error codeinteger(psb_ipk_) :: nnz ! An estimate of the number of nonzeroes of local 密集矩阵或向量分配psb_geall 123456call psb_geall(x, desc_a, info, n, lb)type(psb_d_vect_type) :: x ! dense vector or matrixtype(psb_desc_type) :: desc_a ! communication descriptorinteger(psb_ipk_) :: info ! Error codeinteger(psb_ipk_) :: n ! The number of columns (matrix)integer(psb_ipk_) :: lb ! The lower bound for the column index (matrix) 赋值API 通信描述符赋值 12call psb_cdins(nz, ia, ja, desc_a, info [,ila,jla])call psb_cdins(nz,ja,desc,info[,jla,mask,lidx]) 稀疏矩阵赋值 12345678call psb_spins(nz, ia, ja, val, a, desc_a, info [,local])integer(psb_ipk_) :: nzinteger(psb_ipk_) :: ia(nz)integer(psb_ipk_) :: ja(nz)integer(psb_dpk_) :: val(nz)type(psb_dspmat_type) :: a ! sparse matrixtype(psb_desc_type) :: desc_a ! communication descriptorinteger(psb_ipk_) :: info ! Error code 密集矩阵或向量赋值 1234call psb_geins(m, irw, val, x, desc_a, info [,dupl,local])type(psb_d_vect_type) :: x ! dense vector or matrixtype(psb_desc_type) :: desc_a ! communication descriptorinteger(psb_ipk_) :: info ! Error code 赋值API定义整个稀疏矩阵的稀疏模式以及稀疏矩阵的值， 组装API 通信描述符组装 1call psb_cdasb(desc_a, info) 稀疏矩阵组装 1234call psb_spasb(a, desc_a, info, afmt, upd, dupl, mold)type(psb_dspmat_type) :: a ! sparse matrixtype(psb_desc_type) :: desc_a ! communication descriptorinteger(psb_ipk_) :: info ! Error code 密集矩阵或向量组装 1call psb_geasb(x, desc_a, info, mold) 组装完成之后，整个cd定义完成，即定义好给个区域的halo points，定义好了每个进程的发送和接收的信息，进入assembled状态，之后就可以进行并行的矩阵计算以及方程求解，不用担心内部的通信问题。 并行环境API123456- psb_init 并行环境初始化- psb_info 返回并行环境信息- psb_exit 退出并行环境- psb_abort 中断计算- psb_barrier 暂时中断- psb_wtime 返回时间 数据管理API计算API计算流程12345678- 并行环境初始化 psb_init- 索引空间初始化 psb_cdall- 稀疏矩阵初始化 psb_spall- 矩阵向量初始化 psb_geall- 各进程系数计算 psb_spins, psb_geins- 矩阵组装 psb_cdasb, psb_spasb, psb_geasb- 预处理 psb_precset, psb_precbld- 迭代求解 psb_krylov]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>psblas</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[数值方法简介]]></title>
    <url>%2F2017%2F10%2F25%2F%E6%95%B0%E5%80%BC%E6%96%B9%E6%B3%95%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[数值计算方法是将连续的偏微分方程及其边值条件通过一些数值方法将其离散为一个代数方程组，然后利用计算机进行数值求解。常用的数值方法有有限差分法，有限体积法，有限元法等。有限差分法通过用差商代替微分，将偏微分方程离散为代数方程，这种方法简单有效，容易推导，但通常只针对结构网格。 有限体积法根据守恒定理将方程的积分形式在每一个控制体中列出一个守恒方程，这样可以保证物理量的局部守恒，而且可以适用于任意网格。 有限元方法利用变分原理或加权残值法将偏微分方程变为一种积分形式，这种形式被称为弱形式，然后利用分片多项式对未知量进行插值，带入弱形式中进行求解。有限元方法非常通用和灵活，很容易处理任意边界条件，同时适用于任意网格。 差分迎风差分格式$$\frac{\partial \phi}{\partial x} = \frac{\phi_i - \phi_{i-1}}{Δx}$$ 表示点$i$只与点$i-1$相关 矩阵形式$$[\frac{\partial \phi}{\partial x}Δx] = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp;…&amp;0 \ -1&amp;1 &amp; 0 &amp; …&amp;0 \ 0&amp;-1 &amp;1 &amp; …&amp;0 \ \vdots&amp;\vdots &amp;\vdots&amp;\ddots &amp; \vdots \ 0&amp;0 &amp;0&amp;-1 &amp; 1\end{bmatrix}\begin{bmatrix} \phi_1 \ \phi_2 \ \phi_3 \ \vdots \ \phi_n \end{bmatrix}$$ 矩阵中第一行和最后一行应该由边界条件决定,该矩阵是一个下三角矩阵. 中心差分格式$$\frac{\partial \phi}{\partial x} = \frac{\phi_{i+1} - \phi_{i-1}}{2Δx}$$表示点$i$与点$i-1$和点$i+1$相关 矩阵形式$$[\frac{\partial \phi}{\partial x}Δx] = \frac{1}{2}\begin{bmatrix} 0 &amp; 1 &amp; 0&amp; 0 &amp;…&amp;0 \ -1&amp;0 &amp; 1 &amp; 0&amp;…&amp;0 \ 0&amp;-1 &amp;0 &amp; 1 &amp;…&amp;0 \ \vdots&amp;\vdots &amp;\vdots&amp;\vdots&amp; \ddots&amp; \vdots \ 0&amp;0&amp;0&amp;-1&amp;0 &amp; 1 \ 0&amp;0 &amp;0&amp;0&amp;-1 &amp; 0 \end{bmatrix} \begin{bmatrix} \phi_1 \ \phi_2 \ \phi_3 \ \vdots \ \phi_{n-1} \ \phi_n \end{bmatrix}$$ 矩阵中第一行和最后一行应该由边界条件决定,该矩阵是一个反对称矩阵. 对对流占优方程使用迎风差分格式会产生拖尾效应 (smearing)，使用中心差分格式会产生伪震荡现象(wiggles) 有限元有限元方法在方程两端同时乘以基函数,然后再进行积分,导数项的单元矩阵可以表示为$$\mathbf{B}_{1x} = \int_{e}\vec{N}(x)\frac{\partial \vec{N}^{T}(x)}{\partial x}dx$$ 如果采用线性单元,此时$$\vec{N}(z) = [λ_1,λ_2]^{T}$$ $$\frac{\partial \vec{N}(z)}{\partial z} = \frac{[-1,1]^{T}}{l}$$ $$\int_{x}dx=l$$ $$\int_{x}λ_idx=\frac{l}{2}$$ $$\int_{x}λ_i^{2}dx=\frac{l}{3}$$ $$\int_{x}λ_iλ_jdx=\frac{l}{6},(i\ne j)$$ 所以$$\mathbf{B}_{1x} =\frac{1}{2}\begin{bmatrix}-1&amp;1\\-1&amp;1\end{bmatrix}$$ 将矩阵进行组装之后,得$$(\varphi,\frac{\partial \phi}{\partial x}) = \frac{1}{2}\begin{bmatrix} -1 &amp; 1 &amp; 0&amp; 0 &amp;…&amp;0 \ -1&amp;0 &amp; 1 &amp; 0&amp;…&amp;0 \ 0&amp;-1 &amp;0 &amp; 1 &amp;…&amp;0 \ \vdots&amp;\vdots &amp;\vdots&amp;\vdots&amp; \ddots&amp; \vdots \ 0&amp;0&amp;0&amp;-1&amp;0 &amp; 1 \ 0&amp;0 &amp;0&amp;0&amp;-1 &amp; 1 \end{bmatrix} \begin{bmatrix} \phi_1 \ \phi_2 \ \phi_3 \ \vdots \ \phi_{n-1} \ \phi_n \end{bmatrix}$$ 矩阵中第一行和最后一行应该由边界条件决定,除此之外,该矩阵与中心差分是完全一样的,该矩阵是一个反对称矩阵.所以有限元方法是与中心差分类似的方法. 不能直接用于求解双曲方程. 迎风格式探索格式1$$\mathbf{B}_{1x} =\begin{bmatrix}0&amp;0\\-1&amp;1\end{bmatrix}$$那么$$(\varphi,\frac{\partial \phi}{\partial x}) = \begin{bmatrix} 0 &amp; 0 &amp; 0 &amp;…&amp;0 \ -1&amp;1 &amp; 0 &amp; …&amp;0 \ 0&amp;-1 &amp;1 &amp; …&amp;0 \ \vdots&amp;\vdots &amp;\vdots&amp;\ddots &amp; \vdots \ 0&amp;0 &amp;0&amp;-1 &amp; 1\end{bmatrix}\begin{bmatrix} \phi_1 \ \phi_2 \ \phi_3 \ \vdots \ \phi_n \end{bmatrix}$$ 格式2$$\mathbf{B}_{1x} =\begin{bmatrix}1&amp;0\\-1&amp;0\end{bmatrix}$$那么$$(\varphi,\frac{\partial \phi}{\partial x}) = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp;…&amp;0 \ -1&amp;1 &amp; 0 &amp; …&amp;0 \ 0&amp;-1 &amp;1 &amp; …&amp;0 \ \vdots&amp;\vdots &amp;\vdots&amp;\ddots &amp; \vdots \ 0&amp;0 &amp;0&amp;-1 &amp; 0\end{bmatrix}\begin{bmatrix} \phi_1 \ \phi_2 \ \phi_3 \ \vdots \ \phi_n \end{bmatrix}$$ 格式3$$\mathbf{B}_{1x} =\frac{1}{2}\begin{bmatrix}1&amp;0\\-2&amp;1\end{bmatrix}$$那么$$(\varphi,\frac{\partial \phi}{\partial x}) = \begin{bmatrix} 1/2 &amp; 0 &amp; 0 &amp;…&amp;0 \ -1&amp;1 &amp; 0 &amp; …&amp;0 \ 0&amp;-1 &amp;1 &amp; …&amp;0 \ \vdots&amp;\vdots &amp;\vdots&amp;\ddots &amp; \vdots \ 0&amp;0 &amp;0&amp;-1 &amp; 1/2\end{bmatrix}\begin{bmatrix} \phi_1 \ \phi_2 \ \phi_3 \ \vdots \ \phi_n \end{bmatrix}$$ 数值方法的性质数值方法应该满足以下几点性质 一致性，随着网格尺寸的减小，截断误差应该趋近于0 稳定性 收敛性 物理量守恒 物理边界]]></content>
      <categories>
        <category>数值计算</category>
      </categories>
      <tags>
        <tag>有限元</tag>
        <tag>数值计算</tag>
        <tag>迎风格式</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[偏微分方程简介]]></title>
    <url>%2F2017%2F10%2F25%2F%E5%81%8F%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[偏微分方程分类偏微分方程主要分为 双曲方程 椭圆方程 抛物方程 每一种方程都对应不同的物理过程，每一种方程所需要的初始/边界条件数目不同，每一种方程的数值求解方法不同。 双曲方程描述信息以一定速度沿某个方向传播，解是很多简单波的叠加。 椭圆方程描述信息以一定速度沿所有方向传播，只存在于稳态，非稳态不可能是椭圆方程。 抛物方程描述信息沿下游传播，可以逐步求解。通常描述瞬态问题。 一阶方程$$a_0+a_1\frac{∂{u}}{∂{x_1}} + …+a_d\frac{∂{u}}{∂{x_{d}}} = 0 $$一阶方程一定是双曲型方程。 二阶方程$$\sum_{i,j=1}^{D}a_{ij}\frac{∂^{2}u}{∂x_i∂x_j}+\sum_{k}^{D}b_k\frac{∂u}{∂x_k}+cu+d = 0$$ 系数矩阵$A = \{a_{ij}\} \in R^{D × D}$，该矩阵是对称的方程的性质由该矩阵的特征值决定，如果$D$个特征值全为正，则该方程为椭圆方程；如果$D-1$个特征值为正，另$1$个特征值为负，则该方程为双曲方程；如果$D-1$个特征值为正，另$1$个特征值为$0$，则该方程为抛物方程； 偏微分方程的几何解释 图中，domain of dependence是会对点P处的信息产生影响的区域，zone of influence是点P会影响的区域。 在有限元方法中，某一点的影响点集包含围绕着这一点的所有点，这对椭圆方程是适用的；对双曲方程并不适用，因为在双曲方程中，对某一点的影响点集应该只是上游区域的点，不应该包含下游区域的点。]]></content>
      <categories>
        <category>偏微分方程</category>
      </categories>
      <tags>
        <tag>PDE</tag>
        <tag>偏微分方程</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[一阶中子输运方程SGS离散]]></title>
    <url>%2F2017%2F10%2F23%2F%E4%B8%80%E9%98%B6%E4%B8%AD%E5%AD%90%E8%BE%93%E8%BF%90%E6%96%B9%E7%A8%8BSGS%E7%A6%BB%E6%95%A3%2F</url>
    <content type="text"><![CDATA[SGS(Sub-Grid Scale)方法是将间断有限元与连续有限元结合起来的一种方法，在不增加变量的情况下能够保证方程的稳定性。 输运方程$Ω⋅∇ϕ+σϕ = s$ 假设将通量分为连续部分与间断部分之和，其中$ ϕ_c$为连续部分，$ϕ_d$为间断部分$ϕ = ϕ_c+ϕ_d$ 弱形式在方程两端同时乘以基函数，在进行积分$(φ_c,Ω⋅∇ϕ)+(φ_c,σϕ) = (φ_c,s)$ $\,\,\, 1$$(φ_d,Ω⋅∇ϕ)+(φ_d,σϕ) = (φ_d,s)$ $\,\,\, 2$ 分部积分对方程1的$ϕ$分部积分$&lt;φ_c,Ω⋅nϕ&gt; - (Ω⋅∇φ_c,ϕ)+(φ_c,σϕ) = (φ_c,s)$ 对方程2的$ϕ_d$分部积分$&lt;φ_d,Ω⋅nϕ_d&gt; - (Ω⋅∇φ_d,ϕ_d)+(φ_d,Ω⋅∇ϕ_c)+(φ_d,σϕ) = (φ_d,s)$ 边界条件外边界$&lt;φ,Ω⋅nϕ_c&gt;^{-} = G$$&lt;φ,Ω⋅nϕ_d&gt; = 0$ 内边界$&lt;φ_d,Ω⋅nϕ_d&gt;^{-} = 0$ 带入方程$&lt;φ_c,Ω⋅nϕ_c&gt;^{+} - (Ω⋅∇φ_c,ϕ)+(φ_c,σϕ) = (φ_c,s) - G$ $&lt;φ_d,Ω⋅nϕ_d&gt;^{+} - (Ω⋅∇φ_d,ϕ_d)+(φ_d,Ω⋅∇ϕ_c)+(φ_d,σϕ) = (φ_d,s)$ 矩阵形式离散之后，可以将以上方程写为矩阵形式$\begin{bmatrix} A &amp; B\\C &amp; D\\\end{bmatrix} \begin{bmatrix} \phi_c \ \phi_d\end{bmatrix} = \begin{bmatrix} s_c \ s_d\end{bmatrix}$ 由方程2得$\phi_d=D^{-1}(s_d - C\phi_c)$将其带入方程1中，得$[A-BD^{-1}C ]\phi_c= s_c-BD^{-1}s_d$ 其中矩阵的单元矩阵形式为： 内部$A_e = - (Ω⋅∇φ_c,φ_c)+(φ_c,σφ_c)$$B_e = - (Ω⋅∇φ_c,φ_d)+(φ_c,σφ_d)$$C_e = (φ_d,Ω⋅∇φ_c)+(φ_d,σφ_c)$$D_e = - (Ω⋅∇φ_d,φ_d)+(φ_d,σφ_d) + &lt;φ_d,Ω⋅nφ_d&gt;^{+} $ 边界$A_e = &lt;φ_c,Ω⋅nφ_c&gt;^{+}$ 单元矩阵定义$L = (φ,Ω⋅∇φ)$$R = (φ,σφ)$$O = &lt;φ,Ω⋅nφ&gt;$$O^{+} = &lt;φ,Ω⋅nφ&gt;^{+}$$O^{-} = &lt;φ,Ω⋅nφ&gt;^{-}$ 所以$L+L^{T} = O$$A = -L^{T}+R$$B = A$$C = L+R = A + O$$D = A + O^{+}$ 推导 ? $A-BD^{-1}C = A-A(A+O^{+})^{-1}(A+O) = A-A(A+O^{+})^{-1}(A+O^{+}+O^{-}) = -A(A+O^{+})^{-1}O^{-}$=&gt;$-A(A+O^{+})^{-1}O^{-} \phi= s-A(A + O^{+})^{-1}s$=&gt;$-O^{-} \phi= (A + O^{+})A^{-1}s-s = O^{+}A^{-1}s$=&gt;$A(O^{+})^{-1}(-O^{-})\phi = s$=&gt;$A (I- (O^{+})^{-1}O)\phi = s$]]></content>
      <categories>
        <category>中子输运方程</category>
      </categories>
      <tags>
        <tag>中子输运方程</tag>
        <tag>SGS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[马斯洛人本哲学]]></title>
    <url>%2F2017%2F10%2F21%2F%E9%A9%AC%E6%96%AF%E6%B4%9B%E4%BA%BA%E6%9C%AC%E5%93%B2%E5%AD%A6%2F</url>
    <content type="text"><![CDATA[最近看了马斯洛的人本哲学，有以下几点学习和感悟： 人类永远不会感到一种持久的满足感，需求驱动着人们向前发展，当一个需求逐渐被满足，很快又会出现其他更高级的需求。 需求是有一定的层次关系的，只有满足了某些需求另一些才会出现，通常需求的层次关系为 生理 (食物) 安全 (人身安全，工作，住房等) 爱 (归属，朋友，爱人等) 尊重 (自我的高度评价，自尊以及受到他人尊重) 自我实现 (成为你所能成为的那个人) 需求控制着我们的思想，基本需求会调动着我们身体的所有机能为其服务。 需求就像维生素一样，如果得不到满足便会生病。 高级的需求反应了人的自由，这种高级需求同时意味着责任，但很多人往往会逃避责任，逃避自由；如果没有高级需求，人就会活得像行尸走肉。 需求是和价值联系起来的，只有满足了某种需求才会产生价值。 不仅人有需求，任何事物都有需求，这种需求可以看作所有事物发展的动力。 约拿情节，人们不仅惧怕自己身上最坏的东西，同时也害怕自己身上最好的东西。我们不仅压制着自己危险的，可怕的，可憎的冲动，也常常压制着美好的崇高的冲动。 判断一件事情是好是坏应该主要看做这件事的动机而不是结果。所以做一件事时，如果动机是好的，就勇敢的去做而不要去在意结果。]]></content>
      <categories>
        <category>哲学</category>
      </categories>
      <tags>
        <tag>马斯洛</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[中子输运方程的边界条件]]></title>
    <url>%2F2017%2F10%2F20%2F%E4%B8%AD%E5%AD%90%E8%BE%93%E8%BF%90%E6%96%B9%E7%A8%8B%E7%9A%84%E8%BE%B9%E7%95%8C%E6%9D%A1%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[中子输运方程是一个双曲方程，在数值计算中只需要给定入流边界条件就可以了，通常情况中子输运方程的边界条件包括真空边界条件，即入流恒为零;另一种边界条件为反射边界条件，即如流量等于其关于切线的对称角的出流量。在处理有限元方法的边界条件时，通常是将边界条件直接带入变分之后的边界积分项，然后对带边界条件的变分方程进行离散。以下对球谐函数方法的这两种边界条件进行处理。 真空边界条件$\phi(r,Ω) =0 \,\,\,\,\,\,\,\,\,\,\,\, r \in \Gamma_{v},n\cdot \Omega &lt;0$ 其中$\Gamma_{v}$为真空边界; $n$为边界外法线方向。 对于球谐函数方法有$\int_{n\cdot \Omega &lt;0}n\cdot \Omega\vec{Y}(Ω)\phi(r,Ω) dΩ = 0$ 反射边界条件$\phi(r,Ω) =\phi(r,\mathbf{H}Ω) \,\,\,\,\,\,\,\,\,\,\,\, r \in \Gamma_{r},n\cdot \Omega &lt;0$ 其中$\Gamma_{r}$为反射边界，$\mathbf{H}$为反射矩阵 $\mathbf{H}=\mathbf{I}-2nn^{T}$ 对于球谐函数方法，将其用球谐函数展开，得$[\vec{Y}(Ω)]^{T}\vec{\phi}_{r}(r)= [\vec{Y}(\mathbf{H}Ω)]^{T}\vec{\phi}(r)$所以$\vec{\phi}_{r}(r) = \mathbf{R}\vec{\phi}(r)$其中$\mathbf{R}=\int_{Ω}\vec{Y}(Ω)[\vec{Y}(\mathbf{H}Ω)]^{T}dΩ$ 黎曼分解边界上的角度雅克比矩阵为$\mathbf{A}_{n}=n_x\mathbf{A}_{x}+n_y\mathbf{A}_{y}+n_z\mathbf{A}_{z}$ 对其进行特征值分解，得$\mathbf{A}_{n}=\mathbf{V}Λ\mathbf{V}^{T}=\mathbf{V}(Λ^{+}+Λ^{-})\mathbf{V}^{T}=\mathbf{A}_{n}^{+}+\mathbf{A}_{n}^{-}$ 其中$Λ$特征值对角矩阵，$Λ^{+}$为该矩阵中特征值为正的分量，$Λ^{-}$为该矩阵中特征值为负的分量；$\mathbf{V}$为特征向量形成的矩阵。$\mathbf{A}_{n}^{+}=\mathbf{V}Λ^{+}\mathbf{V}^{T}$$\mathbf{A}_{n}^{-}=\mathbf{V}Λ^{-}\mathbf{V}^{T}$ 边界积分项通过特征值分解，边界积分项可以分解为入流部分与出流部分$\mathbf{B}_{Γ}\mathbf{X}\mathbf{A}_{n} = \mathbf{B}_{Γ}\mathbf{X}\mathbf{A}_{n}^{+} + \mathbf{B}_{Γ}\mathbf{X}\mathbf{A}_{n}^{-} $ 其中$\mathbf{B}_{Γ}$是空间边界上的积分， $\mathbf{B}_{Γ}\mathbf{X}\mathbf{A}_{n}^{-} $表示入流，$\mathbf{B}_{Γ}\mathbf{X}\mathbf{A}_{n}^{+} $ 表示出流，所以对于真空边界条件与反射边界条件可以表示为 真空边界$\mathbf{B}_{Γ}\mathbf{X}\mathbf{A}_{n}^{-} = 0$ 反射边界$\mathbf{B}_{Γ}\mathbf{X}\mathbf{A}_{n}^{-} = \mathbf{B}_{Γ}\mathbf{X}\mathbf{R}\mathbf{A}_{n}^{-}$]]></content>
      <categories>
        <category>中子输运方程</category>
      </categories>
      <tags>
        <tag>中子输运方程</tag>
        <tag>边界条件</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[代数方程的物理含义]]></title>
    <url>%2F2017%2F10%2F20%2F%E4%BB%A3%E6%95%B0%E6%96%B9%E7%A8%8B%E7%9A%84%E7%89%A9%E7%90%86%E5%90%AB%E4%B9%89%2F</url>
    <content type="text"><![CDATA[通常情况下我们使用偏微分方程组来描述物理现象，然后将该方程通过数值离散为一个代数方程来进行求解。然而，在这里，我直接从守恒关系出发，直接研究代数方程的物理含义。 代数方程代数方程是一个矩阵乘以一个未知向量等于一个已知向量的方程，表示如下$\mathbf{A}\vec{x}=\vec{b}$ 第i行可以表示为$\sum_{j}a_{ij}x_{j}=b_{i}$ 另$a_{ij}x_{j}=f_{ij}$，所以$\sum_{j}f_{ij}=b_{i}$ 守恒关系该方程代表一种物理守恒关系，右端项$b_{i}$表示节点$i$产生的量，左端项$\sum_{j}f_{ij}$表示节点$i$消失的量。其中$f_{ij},i\ne j$表示从节点 $i$ 通过对流或扩散转移到节点 $j$ 的量，其中$f_{ii}$表示从节点 $i$ 处发生反应消失的量。 由于$f_{ij} = a_{ij}x_{j}$，所以系数$a_{ij}$可以看成一个权重系数，即从节点 $i$ 转移到节点 $j$ 的量可以用节点 $j$ 的量的一个权重表示。 由于$a_{ij}$的一些性质，实际上 $f_{ij}$ 并不一定定义为 $a_{ij}x_{j}$，但一定要保证守恒关系。 矩阵性质在物理上，通常右端项 $\vec{b}$ 为源项，是非负的，这种情况下要求未知量 $\vec{x}$ 也是非负的。此时矩阵 $\mathbf{A}$ 必须有一些特殊的性质。 M-Matrix代数方程的解为$\vec{x} = \mathbf{A}^{-1}\vec{b}$ 由于 $\vec{b}$ 取任意非负值时，解 $\vec{x}$ 都必须为非负值，所以$\mathbf{A}^{-1}$的所有元素都必须为非负值。此时矩阵 $\mathbf{A}$ 被称为 单调矩阵。 一个非对角元上只有非正值的单调矩阵被称为 M-Matrix 如果矩阵 $\mathbf{A}$ 有以下性质，则$\mathbf{A}$ 是M-Matrix $a_{ii}&gt;0,∀ i$ $a_{ij}\le0,∀ j\ne i$ $\sum{a_{ij}}\ge 0,∀ i$ 证明：$\mathbf{A}=\mathbf{D}-\mathbf{C}$其中$\mathbf{D}= diag(\mathbf{A})&gt;0$为$\mathbf{A}$的对角元素，$\mathbf{C} \ge 0$为$\mathbf{A}$的非对角元，所以$\mathbf{A}^{-1}=(\mathbf{D}-\mathbf{C})^{-1} = [\mathbf{D}(\mathbf{I}-\mathbf{D}^{-1}\mathbf{C})]^{-1} = (\mathbf{I}-\mathbf{D}^{-1}\mathbf{C})^{-1}\mathbf{D}^{-1}$另 $\mathbf{B}=\mathbf{D}^{-1}\mathbf{C} \ge 0$，由于是对角占优的，所以$\mathbf{B}$的谱半径$\rho(\mathbf{B})&lt;1$，所以以下级数是收敛的$(\mathbf{I}-\mathbf{B})^{-1}=\mathbf{I}+\mathbf{B}+\mathbf{B}^2+\mathbf{B}^3+ …$所以$\mathbf{A}^{-1}$的所有元素都为非负值]]></content>
      <categories>
        <category>数值计算</category>
      </categories>
      <tags>
        <tag>数值计算</tag>
        <tag>通量分解</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[网格与矩阵的对应关系]]></title>
    <url>%2F2017%2F10%2F20%2F%E7%BD%91%E6%A0%BC%E4%B8%8E%E7%9F%A9%E9%98%B5%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB%2F</url>
    <content type="text"><![CDATA[在数值计算中，通常会将求解区域进行离散，离散之后的网格与最终形成的系数矩阵有着一一对应的关系，通常情况下离散网格某一点只会对其周围的点产生影响，对更远地方的点完全没有影响，所以与网格对应的矩阵是一个稀疏的，而且该矩阵与网格存在以下关系 网格中的一条边 ij 对应与矩阵中元素 aij。 一个点 i 对应与矩阵中的对角元素 aii。 网格中环绕某个点 i 的点数 psp 代表矩阵中 i 行的元素个数。 网格中环绕某个点 i 的单元数 esp 代表对矩阵中元素 aii 有贡献的单元数。 网格中环绕某条边 ij 的单元数 ese 代表对矩阵中元素 aij 有贡献的单元数。 示例以下为一个网格与矩阵对应关系的示例]]></content>
      <categories>
        <category>有限元</category>
      </categories>
      <tags>
        <tag>有限元</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[球谐函数方法]]></title>
    <url>%2F2017%2F10%2F20%2F%E7%90%83%E8%B0%90%E5%87%BD%E6%95%B0%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[中子输运方程的球谐函数方法是离散输运方程角度变量的一种方法，这种方法将输运方程中与角度相关的变量都用球谐函数展开，然后在方程两端同时乘以球谐函数并在整个角度上进行积分从而消去角度变量，此时方程变为一个只含有空间变量的偏微分方程组。 单能稳态中子输运方程$Ω⋅∇ϕ(r,Ω)+σ_t(r)ϕ(r,Ω)=∫_ {\mathbb{S}} σ_s(r,Ω^{‘}⋅Ω)\phi(r,Ω^{‘})drdΩ^{‘} + s(r,Ω)$ 球谐函数方法将中子角通量密度和散射截面和中子源用球谐函数展开，得 $\phi(r,Ω) ≈ \sum_{n=0}^{N}\sum_{m=-n}^{n}\phi_{n,m}(r)Y_{n,m}(Ω)$ $σ_s(r,Ω^{‘}⋅Ω) ≈ \sum_{n=0}^{L}σ_{s,n}\sum_{m=-n}^{n}Y_{n,m}(Ω)Y_{n,m}(Ω^{‘})$ $s(r,Ω) ≈ \sum_{n=0}^{N}\sum_{m=-n}^{n}s_{n,m}(r)Y_{n,m}(Ω)$ 将展开式带入中子输运方程，并将群内散射源移到方程左端，得 $Ω⋅∇\sum_{n=0}^{N}\sum_{m=-n}^{n}\phi_{n,m}(r)Y_{n,m}(Ω)+\sum_{n=0}^{N}\sum_{m=-n}^{n}σ_n(r)\phi_{n,m}(r)Y_{n,m}(Ω)= \sum_{n=0}^{N}\sum_{m=-n}^{n}s_{n,m}(r)Y_{n,m}(Ω)$ 其中 $σ_n(r) = \left\{\begin{matrix}\sigma_t(r)-\sigma_{s,n}(r) \,\,\,\,\,\,\,\,\,\,\,\, 0 ≤n ≤ L\\\sigma_t(r) \,\,\,\,\,\,\,\,\,\,\,\, L ≤ n ≤ N&amp;\end{matrix}\right.$ 向量形式将球谐函数的下标 $n,m$ 转化为一维下标 $j$，则输运方程可以表示为 $Ω⋅∇[\vec{Y}(Ω)]^{T}\vec{\phi}(r)+[\vec{Y}(Ω)]^{T} \mathbf{Σ}(r)\vec{\phi}(r)= [\vec{Y}(Ω)]^{T}\vec{s}(r)$ 其中$\mathbf{Σ}(r)$为对角矩阵，对角元素由 $\sigma_n$构成。 由球谐函数递推关系可知 $Ω_x\vec{Y}(Ω) = \mathbf{A}_x\vec{Y}(Ω)$ $Ω_y\vec{Y}(Ω) = \mathbf{A}_y\vec{Y}(Ω)$ $Ω_z\vec{Y}(Ω) = \mathbf{A}_z\vec{Y}(Ω)$ 其中 $ \mathbf{A}_x$, $ \mathbf{A}_y$, $ \mathbf{A}_z$为角度$x,y,z$方向上的雅可比矩阵，该矩阵是对称稀疏的。所以方程变为 $[\vec{Y}]^{T}(Ω)[\mathbf{A}_x\frac{\partial \vec{\phi}(r)}{\partial x}+\mathbf{A}_y\frac{\partial \vec{\phi}(r)}{\partial y}+\mathbf{A}_z\frac{\partial \vec{\phi}(r)}{\partial z}+ \mathbf{Σ}\vec{\phi}(r)] = [\vec{Y}(Ω)]^{T}\vec{s}(r)$ Galerkin投影利用Galerkin方法，在方程两端同时左乘球谐函数$\vec{Y}(Ω)$,然后对角度 $Ω$ 进行积分，由球谐函数正交关系 $\int_\mathbb{S}\vec{Y}(Ω)[\vec{Y}]^{T}(Ω)dΩ = \mathbf{I}$ 得经过球谐函数展开之后的偏微分方程组为 $\mathbf{A}_x\frac{\partial \vec{\phi}(r)}{\partial x}+\mathbf{A}_y\frac{\partial \vec{\phi}(r)}{\partial y}+\mathbf{A}_z\frac{\partial \vec{\phi}(r)}{\partial z}+ \mathbf{Σ}\vec{\phi}(r) = \vec{s}(r)$]]></content>
      <categories>
        <category>中子输运方程</category>
      </categories>
      <tags>
        <tag>中子输运方程</tag>
        <tag>球谐函数</tag>
        <tag>pn方法</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[球谐函数]]></title>
    <url>%2F2017%2F10%2F20%2F%E7%90%83%E8%B0%90%E5%87%BD%E6%95%B0%2F</url>
    <content type="text"><![CDATA[球谐函数定义球谐函数图像球谐函数性质单位球面上数值积分]]></content>
      <categories>
        <category>球谐函数</category>
      </categories>
      <tags>
        <tag>球谐函数</tag>
        <tag>pn方法</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[中子输运方程中常运符号的含义]]></title>
    <url>%2F2017%2F10%2F19%2F%E4%B8%AD%E5%AD%90%E8%BE%93%E8%BF%90%E6%96%B9%E7%A8%8B%E4%B8%AD%E5%B8%B8%E8%BF%90%E7%AC%A6%E5%8F%B7%E7%9A%84%E5%90%AB%E4%B9%89%2F</url>
    <content type="text"><![CDATA[$r$ : 空间坐标$\Omega$ : 角度坐标$\varphi$ : 幅角$\vartheta$ : 极角$\mathbb{S}$ : 单位球面$\nabla$ : 梯度算子$\phi$ : 角通量$\Phi$ : 标通量 ($n/(cm^2\cdot s)$)$\sigma$ : 微观截面 ( $b$,$1b=10^{-24}cm^2$ )$\Sigma$ : 宏观截面 ( $cm^{-1}$ )$\Sigma_t$ : 宏观总截面$\Sigma_s$ : 宏观散射截面$\Sigma_f$ : 宏观裂变截面$\nu$ : 每次裂变释放的中子数$\Sigma_{s,n}$ : n 阶散射截面$s_s$ : 散射源 ( $cm^{-3}\cdot s^{-1}$ )$s_f$ : 裂变源 ( $cm^{-3}\cdot s^{-1}$ )$s_e$ : 外源 ( $cm^{-3}\cdot s^{-1}$ )$n$ : 表面单位外法向量 $(\cdot,\cdot)$ : 求解域的内积，包含求解的空间和角度$(u,v)$ = $\int_{v}\int_{\mathbb{S}}uv d\Omega dr$ $&lt; \cdot,\cdot &gt;$ : 边界上的内积$&lt; u,v &gt; = \int_{\partial v}\int_{\mathbb{S}}uv \vec{n} \cdot\vec{\Omega}d\Omega dr$ $&lt; \cdot,\cdot &gt;^{+}$ : 边界上的内积，半角度$\vec{n}\cdot\vec{\Omega}&gt;0$ $&lt; u,v &gt;^{+} = \int_{\partial v}\int_{\vec{n} \cdot\vec{\Omega}&gt;0}uv \vec{n} \cdot\vec{\Omega}d\Omega dr$ $&lt; \cdot,\cdot &gt;^{-}$ : 边界上的内积，半角度 $\vec{n} \cdot \vec{\Omega}&lt;0$ $&lt; u,v &gt;^{-} = \int_{\partial v}\int_{\vec{n} \cdot \vec{\Omega}&lt;0} uv \vec{n}\cdot \vec{\Omega} d\Omega dr$]]></content>
      <categories>
        <category>中子输运方程</category>
      </categories>
      <tags>
        <tag>中子输运方程</tag>
        <tag>符号</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[有限元离散一阶方程的稳定算法]]></title>
    <url>%2F2017%2F10%2F19%2F%E6%9C%89%E9%99%90%E5%85%83%E7%A6%BB%E6%95%A3%E4%B8%80%E9%98%B6%E6%96%B9%E7%A8%8B%E7%9A%84%E7%A8%B3%E5%AE%9A%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[对一阶中子输运方程直接使用 Galerkin 方法在某些情况下会产生非物理的震荡现象。 震荡产生的原因稳定算法]]></content>
      <categories>
        <category>中子输运方程</category>
      </categories>
      <tags>
        <tag>中子输运方程</tag>
        <tag>有限元</tag>
        <tag>galerkin</tag>
        <tag>稳定算法</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[通量分解]]></title>
    <url>%2F2017%2F10%2F19%2F%E9%80%9A%E9%87%8F%E5%88%86%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[通量在求解区域应该满足平衡方程，这种平衡关系反应了输运方程的物理本质，其中包含以下几点 相邻的两个节点通量会互相交换 一个节点上增加的量必须从另一个节点上减去 通量可以通过边界互相交换 通量能够通过反应减少 通量是由源产生的 前三点通过输运方程第一项（泄露项）反应，第四点通过第二项（移出项）反应，第五点由方程右端项反应。同时第三点也通过边界条件进行反应。 数值通量通过定义数值通量$\mathbf{\Phi}$来反应相邻节点间的通量交换关系。其中$\mathbf{\Phi}$是一个稀疏矩阵，其稀疏性与网格的稀疏模式一致。其元素$\Phi_{ij}$表示从节点$j$转移到节点$i$的通量，显然$\Phi_{ij}=-\Phi_{ji}$，即从节点$i$转移到节点$j$的等于负的节点$j$转移到节点$i$的量。即矩阵$\mathbf{\Phi}$是一个反对称矩阵。 通量在节点间的转移量通过输运方程第一项 (泄露项) 表示，有限元离散之后的半离散格式为 $\sum_{j}\mathbf{c}_{ij}\phi_{j}$， 由于$\sum_{j}\mathbf{c}_{ij} = 0$，所以转移到节点 $i$ 的量为$\sum_{j}\Phi_{ij} = \sum_{j}\mathbf{c}_{ij}\phi_{j} = \sum_{j}\mathbf{c}_{ij}\phi_{j} + \phi_{i}\sum_{j}\mathbf{c}_{ij} = \sum_{j}\mathbf{c}_{ij}(\phi_{i}+\phi_{j})$ 可以将系数$\mathbf{c}_{ij}$分解为反对称的$\mathbf{a}_{ij}$和对称的$\mathbf{b}_{ij}$，其中$\mathbf{c}_{ij} = (\mathbf{a}_{ij}+\mathbf{b}_{ij})/2$$\mathbf{a}_{ij} = \mathbf{c}_{ij}-\mathbf{c}_{ji}$$\mathbf{b}_{ij} = \mathbf{c}_{ij}+\mathbf{c}_{ji}$ 所以$\sum_{j}(\mathbf{a}_{ij}+\mathbf{b}_{ij})(\phi_{i}+\phi_{j})/2 = \sum_{j}\Phi_{ij} $ 通量分解为$\Phi_{ij} = \mathbf{a}_{ij}(\phi_{i}+\phi_{j})/2, \forall j \ne i$$\Phi_{ii} =\sum_{j} \mathbf{b}_{ij}(\phi_{i}+\phi_{j})/2$ ##]]></content>
      <categories>
        <category>有限元</category>
      </categories>
      <tags>
        <tag>中子输运方程</tag>
        <tag>通量分解</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[有限元离散算子的性质]]></title>
    <url>%2F2017%2F10%2F19%2F%E6%9C%89%E9%99%90%E5%85%83%E7%A6%BB%E6%95%A3%E7%AE%97%E5%AD%90%E7%9A%84%E6%80%A7%E8%B4%A8%2F</url>
    <content type="text"><![CDATA[某些算子经过有限元离散之后会有一些很好的性质，其中包括拉普拉斯算子离散后的扩散矩阵，梯度或散度算子离散后产生的对流矩阵，未知量直接离散后产生的质量矩阵等。分析这些矩阵的性质这对理解有限元方法的本质以及对离散后方程的性质的理解都很有帮助。 基函数有限元方法在每一个离散点$j$上都定义了基函数$φ_{j}$，基函数之和在任何地方恒等于1，基函数梯度之和在任何地方恒等于0 $∑_{j}φ_{j} = 1$$∑_{j}∇φ_{j} = 0$ 质量矩阵M质量矩阵为未知量离散之后的系数矩阵$\mathbf{M} = \{m_{ij}\} = \{ \int_{V}φ_{i}φ_{j}dV \}$ 质量矩阵第i行之和为$∑_{j}m_{ij} = \int_{V}φ_{i}\sum_{j}φ_{j}dV = \int_{V}φ_{i}dV$ 质量矩阵所有元素之和等于积分区域的体积$∑_{i}∑_{j}m_{ij} = \int_{V}∑_{i}φ_{i}\sum_{j}φ_{j}dV = \int_{V}dV = V$ 质量矩阵实际上是将体积分配到节点对上作为权重系数 质量矩阵集中用一个对角矩阵$\mathbf{M}_{L}$来近似处理质量矩阵$\mathbf{M}$，其对角元素为质量矩阵每一行元素之和$\mathbf{M}_{L} = diag\{m_i\}$, $m_i=\sum_{j}m_{ij}$ 这样的对角矩阵$\mathbf{M}_{L}$是矩阵$\mathbf{M}$的保守近似$(\mathbf{M}_{L}\phi)_{i} = (\mathbf{M}\phi)_{i}$ 质量矩阵集中实际上是将有限元方法与节点为中心的有限体积法结合，在保证反应率守恒的情况下能够减少计算量。 扩散矩阵D扩散矩阵是拉普拉斯算子离散之后的系数矩阵$\mathbf{D} = \{d_{ij}\} = \{ \int_{V}∇φ_{i}∇φ_{j}dV \}$ 扩散矩阵是对称的，每一行，每一列之和都为0$∑_{j}d_{ij} = \int_{V}∇φ_{i}\sum_{j}∇φ_{j}dV = 0$$∑_{i}d_{ij} = \int_{V}\sum_{i}∇φ_{i}∇φ_{j}dV = 0$ 对流矩阵C对流矩阵是梯度或者散度离散之后的系数系数矩阵 $\vec{\mathbf{C}} = \{\vec{c}_{ij}\} = \{ \int_{V}φ_{i}∇φ_{j}dV \}$ 对流矩阵不对称，第i行之和为0$∑_{j}\vec{c}_{ij} = \int_{V}φ_{i}\sum_{j}∇φ_{j}dV = 0$ 第j列之和为$∑_{i}\vec{c}_{ij} = \int_{V}\sum_{i}φ_{i}∇φ_{j}dV = \int_{V}∇φ_{j}dV$ 对流矩阵的对称性对流矩阵与其转置之和 $\vec{b}_{ij} = \vec{c}_{ij}+\vec{c}_{ji}$ $\vec{b}_{ij}=\int_{V}φ_{i}∇φ_{j}dV + \int_{V}φ_{j}∇φ_{i}dV = \int_{V}∇(φ_{i}φ_{j})dV =\int_{Γ}φ_{i}φ_{j}\vec{n}dΓ$ 第j列之和为$∑_{i}\vec{b}_{ij} = \vec{b}_{j} = \int_{Γ}\varphi_{j}\vec{n}dΓ= \vec{n}_{j}Γ_{j}$$\vec{n}_{j}=\int_{Γ}\varphi_{j}\vec{n}dΓ/Γ_{j}$$Γ_{j}=\int_{Γ}\varphi_{j}dΓ$ 矩阵 $\mathbf{B}$ 是定义在边界上的对称矩阵 对流矩阵与其转置之差 $\vec{a}_{ij} = \vec{c}_{ij}-\vec{c}_{ji}$，矩阵$\mathbf{A}$ 是定义在区域内部的反对称矩阵。 $\mathbf{C} = [\mathbf{A}+\mathbf{B}]/2$ 表示对流矩阵是由边界上的对称矩阵和内部的反对称矩阵之和构成。]]></content>
      <categories>
        <category>有限元</category>
      </categories>
      <tags>
        <tag>有限元</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[一阶中子输运方程galerkin离散]]></title>
    <url>%2F2017%2F10%2F19%2F%E4%B8%80%E9%98%B6%E4%B8%AD%E5%AD%90%E8%BE%93%E8%BF%90%E6%96%B9%E7%A8%8Bgalerkin%E7%A6%BB%E6%95%A3%2F</url>
    <content type="text"><![CDATA[对一阶中子输运方程直接进行Galerkin离散然后分部积分并将边界条件带入边界积分项与不进行分部积分而是方程直接减去galerkin离散后的边界条件是等价的。与将两个方程相加除二得到的方程也是等价的。 这与带约束的变分原理中拉格朗日乘子法很相似，其中拉格朗日乘子为 -1。 输运方程$$Ω⋅∇ϕ+σϕ = s$$ 弱形式$$(φ,Ω⋅∇ϕ)+(φ,σϕ) = (φ,s)$$ 分部积分$$&lt;φ,Ω⋅nϕ&gt; - (Ω⋅∇φ,ϕ)+(φ,σϕ) = (φ,s)$$ 边界条件$$&lt;φ,Ω⋅nϕ&gt;^{-} = G$$ 带边界条件的方程$$&lt;φ,Ω⋅nϕ&gt;^{+} - (Ω⋅∇φ,ϕ)+(φ,σϕ) = (φ,s) - G$$ 再分部积分$$&lt;φ,Ω⋅nϕ&gt;^{+} -&lt;φ,Ω⋅nϕ&gt; + (φ,Ω⋅∇ϕ)+(φ,σϕ) = (φ,s) - G$$ 带边界条件的原方程$$ -&lt;φ,Ω⋅nϕ&gt;^{-} + (φ,Ω⋅∇ϕ)+(φ,σϕ) = (φ,s)-G$$该方程实际上就是原方程减去边界上的方程。 相加除2$$ [&lt;φ,Ω⋅nϕ&gt;^{+}-&lt;φ,Ω⋅nϕ&gt;^{-}] /2 + [(φ,Ω⋅∇ϕ)- (Ω⋅∇φ,ϕ)]/2+(φ,σϕ) = (φ,s)-G$$ 矩阵形式定义$$C = (φ,Ω⋅∇φ)$$ $$R = (φ,σφ)$$ $$O = &lt;φ,Ω⋅nφ&gt;$$ $$O^{+} = &lt;φ,Ω⋅nφ&gt;^{+}$$ $$O^{-} = &lt;φ,Ω⋅nφ&gt;^{-}$$ $$b = (φ,s)-G$$所以$$C+C^{T} = O = O^{+} + O^{-}$$$$C - O^{-}= -C^{T}+ O^{+} = (C-C^{T})/2+(O^{+}-O^{-})/2$$ 所以以下三个方程是完全等价的$$[C - O^{-}+R]ϕ = b$$$$[ -C^{T}+ O^{+}+R]ϕ = b$$$$[ (C-C^{T})/2+(O^{+}-O^{-})/2+R]ϕ = b$$]]></content>
      <categories>
        <category>中子输运方程</category>
      </categories>
      <tags>
        <tag>中子输运方程</tag>
        <tag>Galerkin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[三角形单元]]></title>
    <url>%2F2017%2F10%2F18%2F%E4%B8%89%E8%A7%92%E5%BD%A2%E5%8D%95%E5%85%83%2F</url>
    <content type="text"><![CDATA[本文解析的推导了线性三角形单元的基函数及其相关积分。将所有与基函数相关积分都用节点的实际坐标表示，并将其写成向量乘积的形式，这样在计算单元刚度矩阵时就不用使用数值积分而可以直接使用解析形式，而且如果采用无矩阵方法，单元矩阵与向量的乘积只需要很少的计算量。 形状函数$\vec{N}(r) = [λ_1,λ_2,λ_3]^{T}$$\frac{\partial \vec{N}(r)}{\partial x} = \frac{[b_1,b_2,b_3]^{T}}{2Δ}$$\frac{\partial \vec{N}(r)}{\partial y} = \frac{[c_1,c_2,c_3]^{T}}{2Δ}$ 其中 $b_1 = y_2-y_3$$b_2 = y_3-y_1$$b_3 = y_1-y_2$ $c_1 = x_3-x_2$$c_2 = x_1-x_3$$c_3 = x_2-x_1$ $2Δ=c_3b_2-b_3c_2$ 欧拉公式$\int_{s}λ_1^aλ_2^bλ_3^cdxdy=\frac{a!b!c!}{(a+b+c+2)!}2Δ$ 得 $\int_sdxdy = \frac{1}{2}2Δ$$\int_sλ_idxdy = \frac{1}{6}2Δ \,\,\,\,\, i=1,2,3$$\int_sλ_i^2dxdy = \frac{1}{12}2Δ \,\,\,\,\, i=1,2,3$$\int_sλ_iλ_jdxdy = \frac{1}{24}2Δ \,\,\,\,\, i=1,2,3;j=1,2,3,i≠j$ 单元矩阵$\mathbf{B}_{Γ}=\int_{Γ}\vec{N}(r)[\vec{N}]^{T}(r)dΓ=\frac{l}{6}(\vec{I}\vec{I}^T+\mathbf{I})$ $\mathbf{B}_{11}=\int_{e}\vec{N}(r)[\vec{N}]^{T}(r)dr=\frac{2Δ}{24}(\vec{I}\vec{I}^T+\mathbf{I})$ $\mathbf{B}_{x1}=\int_{e}\frac{\partial \vec{N}(r)}{\partial x}[\vec{N}]^{T}(r)dr=\frac{1}{6}\begin{bmatrix}b_1\\b_2\\b_3\end{bmatrix}\vec{I}^T$ $\mathbf{B}_{y1}=\int_{e}\frac{\partial \vec{N}(r)}{\partial x}[\vec{N}]^{T}(r)dr=\frac{1}{6}\begin{bmatrix}c_1\\c_2\\c_3\end{bmatrix}\vec{I}^T$ $\vec{b}=\int_{e}\vec{N}(r)dr=\frac{2Δ}{6}\vec{I}$ 与向量乘积移出项$[\mathbf{B}_{11}\mathbf{X}\mathbf{Σ}]_{\vec{e},j}= \int_{e}\vec{N}(r)[\vec{N}]^{T}(r)dr = \frac{2Δ}{24}(\vec{I}\vec{I}^T+\mathbf{I})\begin{bmatrix}\phi_{e(1),j}\\\phi_{e(2),j}\\\phi_{e(3),j}\end{bmatrix}Σ_{j}$ $= \frac{2ΔΣ_{j}}{24}(sum(\phi_{\vec{e},j})+\begin{bmatrix}\phi_{e(1),j}\\\phi_{e(2),j}\\\phi_{e(3),j}\end{bmatrix})$ 对流项 X方向 $-[\mathbf{B}_{x1}\mathbf{X}\mathbf{A}_x]_{\vec{e},j} = -\frac{1}{6}\begin{bmatrix}y_2-y_3\\y_3-y_1\\y_1-y_2\end{bmatrix}sum(\phi^{x}_{\vec{e},j})$ 其中 $\phi^{x}=\mathbf{X}\mathbf{A}_x$ Y方向 $-[\mathbf{B}_{y1}\mathbf{X}\mathbf{A}_y]_{\vec{e},j} = -\frac{1}{6}\begin{bmatrix}x_3-x_2\\x_1-x_3\\x_2-x_1\end{bmatrix}sum(\phi^{y}_{\vec{e},j})$ 其中 $\phi^{y}=\mathbf{X}\mathbf{A}_y$ 边界项$[\mathbf{B}_{Γ}\mathbf{X}\mathbf{A}_{n}]_{\vec{e},j}=\frac{l}{6}(\vec{I}\vec{I}^T+\mathbf{I})\begin{bmatrix}\phi^{n}_{e(1),j}\\\phi^{n}_{e(2),j}\end{bmatrix} = \frac{l}{6}(sum(\phi^{n}_{\vec{e},j})+\begin{bmatrix}\phi^{n}_{e(1),j}\\\phi^{n}_{e(2),j}\end{bmatrix})$ 右端项$[\vec{b}[\vec{s}]^{T}]_{\vec{e},j} = \frac{2Δ}{6}\vec{I}s_{j}$]]></content>
      <categories>
        <category>有限元</category>
      </categories>
      <tags>
        <tag>有限元</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[利用hexo和github搭建个人blog]]></title>
    <url>%2F2017%2F10%2F18%2F%E5%88%A9%E7%94%A8hexo%E5%92%8Cgithub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BAblog%2F</url>
    <content type="text"><![CDATA[最开始时使用emacs的org-mod写博客，但使用atom之后就很少使用emacs，blog也没有坚持写下去。现在想用markdown代替org-mod重新开始写blog，所以又开始了折腾。现在的主要流程是使用atom编辑markdown文档，然后使用hexo生成和发布blog，发布平台使用 github-page，下面对整个流程进行简单说明。 hexo是一款基于node 的静态博客网站生成器，官网hexo，按照官网说明一步步完成 hexo 安装。 常用命令12345678# 新建posthexo n post# 生成静态页面hexo g# 开启服务hexo s# 发布hexo d 配置站点配置文件_config.yml在项目根目录下, 主要包含站点的一些配置，例如1234567# Sitetitle:subtitle:description:author:language:timezone: 主题hexo 包含很多 主题 可以下载，直接clone到themes文件夹中，并在站点配置文件_config.yml中作简单配置就可以使用，next 主题是一款很干净简介的主题，以下主要对next主题进行配置。 next主题安装下载主题1git clone https://github.com/iissnan/hexo-theme-next themes/next 下载之后在 /themes/next/README.md中有next的使用说明和在线文档，仔细阅读后进行相关配置。 启用主题在站点配置文件_config.yml中找到 theme 字段，并将其值更改为 next12## Themes: https://hexo.io/themes/theme: next next主题配置主题配置文件为 /themes/next/_config.yml. 设置 scheme12345## Schemes#scheme: Musescheme: Mist#scheme: Pisces#scheme: Gemini 设置菜单123456789# When running the site in a subdirectory (e.g. domain.tld/blog), remove the leading slash (/archives -&gt; archives)menu: home: / categories: /categories/ #about: /about/ archives: /archives/ tags: /tags/ #sitemap: /sitemap.xml #commonweal: /404/ 某些页面默认没有，需要新建1hexo new page categories 并在新建页面中添加1type: "categories" 设置头像1avatar: /images/bio.png 修改themes\next\source\css_common\components\sidebar\sidebar-author.styl，设置头像为圆形 1234567891011121314151617181920212223242526272829.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: site-author-image-border-color; /* start*/ border-radius: 50% webkit-transition: 1.4s all; moz-transition: 1.4s all; ms-transition: 1.4s all; transition: 1.4s all; /* end */&#125;/* start */.site-author-image:hover &#123; background-color: #55DAE1; webkit-transform: rotate(360deg) scale(1.1); moz-transform: rotate(360deg) scale(1.1); ms-transform: rotate(360deg) scale(1.1); transform: rotate(360deg) scale(1.1);&#125;/* end */ 设置分享12# Sharejiathis: true 设置评论使用第三方社交评论系统友言，注册友言之后得到一个用户id，填入配置文件中就行。123# Support for youyan comments system.# You can get your uid from http://www.uyan.ccyouyan_uid: xxxx 设置站内搜索使用local search, 安装 hexo-generator-searchdb，在站点的根目录下执行以下命令1npm install hexo-generator-searchdb --save 编辑站点配置文件，新增12345search: path: search.xml field: post format: html limit: 10000 编辑主题配置文件，启用local search123# Local searchlocal_search: enable: true 设置社交123social: #LinkLabel: Link GitHub: https://github.com/fccf 设置链接1234567# Blog rollslinks_title: Links#links_layout: blocklinks_layout: inlinelinks: #Title: http://example.com/ ITER: http://www.iter.org/ 文章加密打开themes/next/layout/_partials/head/custom-head.swig文件,插入以下代码： 12345678910&lt;script&gt; (function()&#123; if('&#123;&#123; page.password &#125;&#125;')&#123; if (prompt('请输入文章密码') !== '&#123;&#123; page.password &#125;&#125;')&#123; alert('密码错误！'); history.back(); &#125; &#125; &#125;)();&lt;/script&gt; 然后在文章开头添加 password 1234title:date:tags:password: xxxx 写作使用atom编辑器编辑markdown文件，因为atom编辑器有些markdown插件很好用，比如 markdown-preview-enhanced 可以在线预览，可以直接编辑图片和公式等，用起来比emacs的org-mod爽，所以彻底抛弃了emacs。 markdown 语法markdown语法很简单，上手很快，但功能很强大。markdown可以使用很多编辑器进行编辑，还可以在线编辑以及预览 stackedit. readmore1&lt;!-- more --&gt; 设置MathJax公式显示需要设置 MathJax12345# MathJax Supportmathjax: enable: true per_page: false cdn: //cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML MathJax与Markdown兼容问题Hexo默认使用”hexo-renderer-marked”引擎渲染网页，该引擎会把一些特殊的markdown符号转换为相应的html标签，比如在markdown语法中，下划线’_‘代表斜体，会被渲染引擎处理为标签。修改代码解决该问题 参考 去掉\的额外转义 将em标签对应的符号中，去掉_,因为markdown中有*可以表示斜体 打开marked.js（在./node_modules/marked/lib/中）取消对\\,\{,\}的转义(escape),作以下替换12// escape: /^\\([\\`*&#123;&#125;\[\]()#+\-.!_&gt;])/, escape: /^\\([`*\[\]()# +\-.!_&gt;])/, 取消对_的转义(escape),作以下替换12//em: /^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/, em:/^\*((?:\*\*|[\s\S])+?)\*(?!\*)/, 图片使用七牛云作为图床，将所有图片都上传到七牛云上。 配置七牛云七牛云配置文件conf_qiniu.json可以直接放在blog目录下1234567891011121314&#123; "src_dir" : "xxx", "access_key" : "xxx", "secret_key" : "xxx", "up_host" : "xxx", "zone" : "hn", "bucket" : "images", "ignore_dir" : false, "overwrite" : false, "check_exists" : false, "check_hash" : false, "check_size" : false, "rescan_local" : true&#125; 上传图片1qshell qupload conf_qiniu.json 发布github在github上新建项目： fccf.github.io 配置1234deploy: type: git repo: git@github.com:fccf/fccf.github.io.git branch: master 发布发布前先生成1hexo d -g 如果出现错误：ERROR Deployer not found: git，执行命令 npm install hexo-deployer-git –save 绑定域名 在阿里云上申请一个域名 在根目录下新建文件CNAME,文件内容为域名，不含https和www 在阿里云控制台中添加域名解析 12@ A 151.101.77.147www CNAME username.github.io. [1] http://ookamiantd.top/2017/build-blog-hexo-advanced/]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F10%2F17%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>tools</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
